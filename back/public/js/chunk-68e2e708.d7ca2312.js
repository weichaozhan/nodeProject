(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-68e2e708"],{"24a5":function(e,t,i){"use strict";var o=i("c31d");i.n(o).a},"350d":function(e,t,i){"use strict";i.r(t);var o=i("efa4"),n=(i("cf54"),i("84fb"),i("51fe"));var a=i("761c"),r=i("8966"),s={name:"",data:function(){return{form:{name:"",imgUrl:"",describe:""},rules:{name:[{required:!0,message:"请输入小组名称",trigger:"blur"},{max:6,message:"小组名称是最多6个字",trigger:"blur"}],imgUrl:[{required:!0,message:"请上传头像",trigger:"blur"}],describe:[{required:!0,message:"请输入小组介绍",trigger:"blur"},{validator:function(e,t,i){(function(e){for(var t=0,i=e.length,o=null,n=0;n<i;n++)t+=(o=e.charCodeAt(n))>=0&&o<=128?1:2;return t})(t)>60?i("小组介绍最多60个字符，30个汉字"):i()},trigger:"blur"}]},imgUploadAPI:a.g,tabLabel:{0:"没有标签",1:"支持 vs 反对",2:"正确 vs 错误",3:"喜欢 vs 不喜欢"},loadingGlobal:!1,imgLoading:!1,loadingOption:!1,loadingDelete:!1,loadingHide:!1,isHideGroup:n.a.isHideGroup,isMidnightGroup:n.a.isMidnightGroup}},props:{actionType:{required:"true"},groupId:{type:Number}},methods:{getGroupDetailInfo:function(){var e=this;this.loadingGlobal=!0,Object(r.h)({id:this.groupId}).then(function(t){var i=t.data.data;e.form={name:i.name,imgUrl:i.imgUrl,describe:i.describe},e.loadingGlobal=!1}).catch(function(t){e.loadingGlobal=!1})},handlePosterSuccess:function(e,t){this.imgLoading=!1,this.form.imgUrl=e.data.url},oprateGroup:function(){var e=this;this.$refs.form.validate(function(t){if(t){var i="edit"===e.actionType?r.j:r.b;e.loadingOption=!0,i(Object(o.a)({},e.form),e.groupId).then(function(t){var i=t.data;1e3===i.code?(e.$message({type:"success",message:"".concat("edit"===e.actionType?"编辑":"新增","成功！")}),e.$emit("refresh-list"),e.$emit("refresh-detail"),e.closeForm()):e.$message({type:"error",message:i.msg}),e.loadingOption=!1}).catch(function(t){e.loadingOption=!1})}})},deleteGroup:function(){var e=this;this.$confirm("是否要删除这个小组？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.loadingDelete=!0,Object(r.c)({id:e.groupId}).then(function(t){var i=t.data;1e3===i.code?(e.$message({type:"success",message:"删除成功！"}),e.$emit("refresh-list"),e.$emit("back-list"),e.closeForm()):e.$message({type:"error",message:i.msg}),e.loadingDelete=!1}).catch(function(t){e.loadingDelete=!1})}).catch(function(){})},toggleGroup:function(){var e=this;this.$confirm("是否".concat(this.isHideGroup?"取消隐藏":"隐藏","该小组，该操作不会对数据产生影响？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.isHideGroup?r.a:r.i;e.loadingHide=!0,t({id:e.groupId}).then(function(t){var i=t.data;1e3===i.code?(e.$message({type:"success",message:"".concat(e.isHideGroup?"取消隐藏":"隐藏","成功！")}),e.$emit("refresh-list"),e.$emit("back-list"),e.closeForm()):e.$message({type:"error",message:i.msg}),e.loadingHide=!1}).catch(function(t){e.loadingHide=!1})}).catch(function(){})},closeForm:function(){this.$emit("close-form")}},mounted:function(){"edit"===this.actionType&&this.getGroupDetailInfo()}},l=(i("24a5"),i("048f")),c=Object(l.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGlobal,expression:"loadingGlobal"}]},[i("div",{staticClass:"option-title-wrapper"},[i("h3",{staticClass:"fl-l"},[e._v(e._s("edit"===e.actionType?"编辑":"新增")+"小组")]),i("div",{staticClass:"options fl-r"},["edit"!==e.actionType||e.isMidnightGroup?e._e():i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingDelete,expression:"loadingDelete"}],attrs:{size:"small",type:"danger"},on:{click:e.deleteGroup}},[e._v("删除")]),"edit"!==e.actionType||e.isMidnightGroup?e._e():i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingHide,expression:"loadingHide"}],attrs:{size:"small",type:"danger"},on:{click:e.toggleGroup}},[e._v(e._s(e.isHideGroup?"取消隐藏":"隐藏"))]),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingOption,expression:"loadingOption"}],attrs:{size:"small",type:"primary"},on:{click:e.oprateGroup}},[e._v("保存")]),i("el-button",{attrs:{size:"small"},on:{click:e.closeForm}},[e._v("返回")])],1)]),i("el-form",{ref:"form",staticClass:"content-edit",attrs:{model:e.form,rules:e.rules,"label-width":"100px","label-position":"left"}},["edit"===e.actionType?i("div",{staticClass:"msg--detail-group"},[i("span",{staticClass:"title--content-item"},[e._v("小组ID")]),e._v(e._s(e.groupId)+"                \n        ")]):e._e(),i("el-form-item",{attrs:{prop:"name",label:"小组名称"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"小组头像",prop:"imgUrl"}},[i("p",{staticStyle:{color:"skyblue"}},[e._v("请上传图片比例为1：1的图片")]),i("div",{staticClass:"poster-wrapper"},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],staticClass:"poster-uploader",attrs:{disabled:e.isMidnightGroup,action:e.imgUploadAPI,"show-file-list":!1,"on-success":e.handlePosterSuccess,"before-upload":function(){e.imgLoading=!0},"on-error":function(){e.imgLoading=!1},accept:"image/jpg,image/jpeg,image/png"}},[e.form.imgUrl?i("img",{staticClass:"poster",attrs:{src:e.form.imgUrl}}):i("i",{staticClass:"el-icon-plus poster-uploader-icon"})])],1)]),i("el-form-item",{attrs:{label:"小组介绍",prop:"describe"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入小组介绍"},model:{value:e.form.describe,callback:function(t){e.$set(e.form,"describe",t)},expression:"form.describe"}})],1)],1)],1)},[],!1,null,"d697cf28",null);c.options.__file="ActionForm.vue";t.default=c.exports},"761c":function(e,t,i){"use strict";i.d(t,"g",function(){return a}),i.d(t,"j",function(){return r}),i.d(t,"e",function(){return s}),i.d(t,"b",function(){return l}),i.d(t,"h",function(){return c}),i.d(t,"a",function(){return d}),i.d(t,"i",function(){return u}),i.d(t,"c",function(){return m}),i.d(t,"f",function(){return g}),i.d(t,"d",function(){return p});var o=i("5bf4"),n=i("4088"),a="".concat(n.a,"/upload"),r=function(e){return Object(o.a)({url:"/upload",method:"post",data:e})},s=function(){return Object(o.a)({url:"/getProvince",method:"get"})},l=function(e){return Object(o.a)({url:"/getCityList",method:"get",params:e})},c=function(e){return Object(o.a)({url:"/users/login",method:"post",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},d=function(){return Object(o.a)({url:"/account/authList",method:"get"})},u=function(e){return Object(o.a)({url:"/users/modifyPassword",method:"post",data:e})},m=function(e){return Object(o.a)({url:"/member/doctor/getHospitalList",method:"get",params:e})},g=function(e){return Object(o.a)({url:"/content/secondDepartment",method:"get",params:e})},p=function(){return Object(o.a)({url:"/member/doctor/getPositionalTitleList",method:"get"})}},c31d:function(e,t,i){}}]);