(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6856456c"],{"35f3":function(t,e,o){"use strict";var i=o("b308");o.n(i).a},"761c":function(t,e,o){"use strict";o.d(e,"g",function(){return a}),o.d(e,"j",function(){return r}),o.d(e,"e",function(){return l}),o.d(e,"b",function(){return s}),o.d(e,"h",function(){return c}),o.d(e,"a",function(){return d}),o.d(e,"i",function(){return u}),o.d(e,"c",function(){return m}),o.d(e,"f",function(){return f}),o.d(e,"d",function(){return p});var i=o("5bf4"),n=o("4088"),a="".concat(n.a,"/upload"),r=function(t){return Object(i.a)({url:"/upload",method:"post",data:t})},l=function(){return Object(i.a)({url:"/getProvince",method:"get"})},s=function(t){return Object(i.a)({url:"/getCityList",method:"get",params:t})},c=function(t){return Object(i.a)({url:"/users/login",method:"post",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},d=function(){return Object(i.a)({url:"/account/authList",method:"get"})},u=function(t){return Object(i.a)({url:"/users/modifyPassword",method:"post",data:t})},m=function(t){return Object(i.a)({url:"/member/doctor/getHospitalList",method:"get",params:t})},f=function(t){return Object(i.a)({url:"/content/secondDepartment",method:"get",params:t})},p=function(){return Object(i.a)({url:"/member/doctor/getPositionalTitleList",method:"get"})}},b308:function(t,e,o){},e55b:function(t,e,o){"use strict";o.r(e);o("20a2"),o("cf54"),o("25d7"),o("bd2d");var i=o("761c"),n=o("5120"),a={name:"",data:function(){return{form:{name:"",hospitalId:"",departmentId:"",positionalId:"",careerAge:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],careerAge:[{validator:function(t,e,o){""===e?o(new Error("请输入职业年龄")):isNaN(parseFloat(e))&&parseFloat(e)<0?o(new Error("职业年龄必须为大于等于零的数值!")):o()},trigger:"blur"}]},hospitalList:[],departmentList:[],positionalList:[],loading:!1,loadingSelecors:!1,loadingDepm:!1}},props:{doctorId:{required:!0},doctorDetail:{required:!0},modelStatus:{required:!0}},watch:{doctorDetail:function(t){this.initForm(),this.initSelectors()},positionalList:function(t){this.handlePositionalId(t)},modelStatus:function(t){t||(this.initForm(),this.handlePositionalId(this.positionalList))}},methods:{handlePositionalId:function(t){var e=this;t.some(function(t){return t.label===e.doctorDetail.positionalTitle&&e.$set(e.form,"positionalId",t.value),!1})},initForm:function(){this.resetForm(),this.form={name:this.doctorDetail.docName,hospitalId:this.doctorDetail.hospitalId,departmentId:this.doctorDetail.departmentId,positionalId:this.doctorDetail.positionalTitle,careerAge:this.doctorDetail.careerAge},this.handlePositionalId(this.positionalList)},initSelectors:function(){var t=this;this.loadingSelecors=!0,Promise.all([this.getHospitalList(),this.getSecondDepartment(),this.getPositionalTitleList()]).then(function(e){0===t.hospitalList.filter(function(e){return e.value===t.form.hospitalId}).length&&t.hospitalList.push({value:t.doctorDetail.hospitalId,label:t.doctorDetail.hospitalName}),t.loadingSelecors=!1}).catch(function(e){t.loadingSelecors=!1})},focusHospital:function(){0===this.hospitalList.length&&this.getHospitalList()},getHospitalList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.loadingDepm=!0,Object(i.c)({page:1,limit:1e3,filter:e}).then(function(e){t.loadingDepm=!1,t.hospitalList=e.data.data.data.map(function(t){return{value:t.id,label:t.name}})}).catch(function(e){t.loadingDepm=!1})},getSecondDepartment:function(){var t=this;return Object(i.f)({page:1,limit:1e3}).then(function(e){t.departmentList=e.data.data.data.map(function(t){return{value:t.id,label:t.departmentName}})})},getPositionalTitleList:function(){var t=this;return Object(i.d)().then(function(e){t.positionalList=e.data.data.map(function(t){return{value:t.positionalId,label:t.positionalTitle}})})},submitForm:function(){var t=this;this.$refs.formEdit.validate(function(e){if(e){var o=Object.assign({docId:t.doctorId},t.form);t.modifyDocInfo(o)}})},modifyDocInfo:function(t){var e=this;this.loading=!0,Object(n.q)(t).then(function(t){var o=t.data;1e3===o.code?(e.$message({type:"success",message:"修改信息成功！"}),e.closeForm(),e.$emit("finish-action")):e.$message({type:"error",message:o.msg}),e.loading=!1}).catch(function(t){e.loading=!1})},resetForm:function(){this.$refs.formEdit.resetFields()},closeForm:function(){this.$emit("close-form")}},mounted:function(){this.initForm(),this.initSelectors()}},r=(o("35f3"),o("048f")),l=Object(r.a)(a,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingSelecors,expression:"loadingSelecors"}],ref:"formEdit",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[o("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"所在医院:",prop:"hospitalId"}},[o("el-select",{attrs:{filterable:"",remote:"","remote-method":t.getHospitalList,loading:t.loadingDepm,placeholder:"请选择"},on:{focus:t.focusHospital},model:{value:t.form.hospitalId,callback:function(e){t.$set(t.form,"hospitalId",e)},expression:"form.hospitalId"}},t._l(t.hospitalList,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),o("el-form-item",{attrs:{label:"所在科室:",prop:"departmentId"}},[o("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.departmentId,callback:function(e){t.$set(t.form,"departmentId",e)},expression:"form.departmentId"}},t._l(t.departmentList,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),o("el-form-item",{attrs:{label:"职称:",prop:"positionalId"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.positionalId,callback:function(e){t.$set(t.form,"positionalId",e)},expression:"form.positionalId"}},t._l(t.positionalList,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),o("el-form-item",{attrs:{label:"职业年龄:",prop:"careerAge"}},[o("el-input",{model:{value:t.form.careerAge,callback:function(e){t.$set(t.form,"careerAge",e)},expression:"form.careerAge"}})],1),o("el-form-item",{staticClass:"pt10"},[o("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("立即提交")]),o("el-button",{on:{click:t.closeForm}},[t._v("取消")])],1)],1)},[],!1,null,"5287752a",null);l.options.__file="EditMsgDocForm.vue";e.default=l.exports}}]);