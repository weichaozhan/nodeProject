(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f44a9dca"],{"40b6":function(e,t,a){"use strict";var s=a("c702");a.n(s).a},c702:function(e,t,a){},cea3:function(e,t,a){"use strict";a.r(t);a("cf54"),a("84fb");var s=a("4c5b"),i={data:function(){return{imageUrl:"",addFirstDepAPI:"".concat(s.a),departmentImage:"",imgFile:"",xlsFile:"",firstDepName:"",firstDepOptions:[],selectFirstDep:"",imageShowUrl:"",xlsfileList:[],isSee:!0}},props:{depId:{type:Number,required:!0}},methods:{handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},uploadImg:function(e){console.log(e),this.imgFile=e.raw,this.imageShowUrl=URL.createObjectURL(e.raw)},uploadXls:function(e,t){console.log(e),this.xlsFile=e.raw,this.xlsfileList=[{name:e.raw.name,url:URL.createObjectURL(e.raw)}],console.log(e.raw.name)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件,请先删除  ".concat(this.xlsfileList[0].name,"  后重新添加"))},submitFirstDep:function(){var e=this;if(this.depId<=0){var t=new FormData;0!==this.imgFile&&t.append("departmentImage",this.imgFile),0!==this.xlsFile&&t.append("disease",this.xlsFile),t.append("departmentName",this.firstDepName),t.append("superiorDepartmentId",this.selectFirstDep),t.append("isSee",!0===this.isSee?1:0),Object(s.b)(t).then(function(t){var a=t.data,s="success";1e3===a.code?e.finishOption():s="error",e.$message({type:s,message:"success"===s?"添加成功！":a.msg})})}else{t=new FormData;""!==this.imgFile&&t.append("departmentImage",this.imgFile),console.log(this.xlsFile),void 0!==this.xlsFile&&t.append("disease",this.xlsFile),t.append("departmentName",this.firstDepName),t.append("superiorDepartmentId",this.selectFirstDep),t.append("isSee",!0===this.isSee?1:0),Object(s.d)(this.depId,t).then(function(t){var a=t.data,s="success";1e3===a.code?e.finishOption():s="error",e.$message({type:s,message:"success"===s?"修改成功！":a.msg})})}},getDetails:function(e){var t=this;Object(s.k)(e).then(function(e){t.imageUrl=e.data.data.departmentImage,t.imageShowUrl=e.data.data.departmentImage,t.firstDepName=e.data.data.departmentName,t.xlsFile=e.data.data.disease,t.selectFirstDep=e.data.data.superiorDepartmentId,t.isSee=1==e.data.data.isSee}).catch(function(e){})},getFirstDepSelect:function(){var e=this;Object(s.h)().then(function(t){var a=t.data.data;e.firstDepOptions=a})},finishOption:function(){this.$emit("finish-action"),this.$emit("close-form")}},mounted:function(){console.log(this.depId),this.depId>0&&this.getDetails(this.depId),this.getFirstDepSelect()}},l=(a("40b6"),a("048f")),n=Object(l.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h5",[e._v("请输入二级科室名称")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firstDepName,callback:function(t){e.firstDepName=t},expression:"firstDepName"}}),a("h5",[e._v("所属第一科室")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectFirstDep,callback:function(t){e.selectFirstDep=t},expression:"selectFirstDep"}},e._l(e.firstDepOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.departmentName,value:e.id}})})),a("div",[a("h5",[e._v("科室图片")]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"auto-upload":!1,"on-change":e.uploadImg,"before-upload":e.beforeAvatarUpload}},[e.imageShowUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageShowUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",[a("h5",[e._v("疾病XLS")]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!0,"auto-upload":!1,"file-list":e.xlsfileList,multiple:!1,"on-exceed":e.handleExceed,limit:1,"on-change":e.uploadXls}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传疾病XLS")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传XLS文件")])],1)],1),a("div",{staticClass:"isSee-switch"},[a("h5",[e._v("是否可见")]),a("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.isSee,callback:function(t){e.isSee=t},expression:"isSee"}})],1),e.depId>0?a("el-button",{attrs:{type:"primary"},on:{click:e.submitFirstDep}},[e._v("\n        修改\n    ")]):a("el-button",{attrs:{type:"primary"},on:{click:e.submitFirstDep}},[e._v("\n        添加\n    ")])],1)},[],!1,null,null,null);n.options.__file="AddSecDepModal.vue";t.default=n.exports}}]);