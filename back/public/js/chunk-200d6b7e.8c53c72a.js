(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-200d6b7e"],{"005d":function(t,e,n){},"396e":function(t,e,n){"use strict";var i=n("b0432");n.n(i).a},"4f5b":function(t,e,n){"use strict";n.r(e);var i=n("efa4"),o=(n("84fb"),n("25d7"),n("bd2d"),n("4088")),a=n("761c"),s=["/editor/langs/zh_CN.js"],r=["/editor/themes/modern/theme.js"],l=["paste","link","media","preview","image","imagetools","fullpage","fullscreen","emoticons","advlist","anchor","autolink","colorpicker","compat3x","contextmenu","directionality","hr","lists","table","insertdatetime","codesample","textcolor","searchreplace","pagebreak"],c=["/editor/skins/lightgray/content.min.css","/editor/skins/lightgray/skin.mobile.min.css"],d={name:"",data:function(){return{tinyEditor:null,contentChangeCount:0,loading:!1}},props:{value:{default:""}},watch:{value:function(t){this.tinyEditor&&!this.contentChangeCount&&this.setContent("watch"),this.contentChangeCount++}},methods:{initEditor:function(){var t=this;tinymce.init({selector:"#ueditor".concat(this._uid),plugins:l,toolbar1:"formatselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat | emoticons",importcss_append:!0,height:200,paste_data_images:!0,images_upload_url:"".concat(o.a,"/upload"),media_live_embeds:!0,images_upload_handler:function(t,e,n){var i=new FormData;i.append("file",t.blob(),t.filename()),Object(a.j)(i).then(function(t){var i=t.data;1e3===i.code?e(i.data.url):n("Invalid JSON: ".concat(i.msg))})},video_template_callback:function(t){return'<iframe width="'.concat(t.width,'" height="').concat(t.height,'" src="').concat(t.source1,'" frameborder="1" gesture="media" allow="encrypted-media" allowfullscreen></iframe>')},init_instance_callback:function(e){e.on("Change",function(){t.$emit("input",t.tinyEditor.getContent())})}}).then(function(e){t.tinyEditor=tinymce.activeEditor,t.setContent()})},setContent:function(){this.tinyEditor.setContent(this.value)},loadFunc:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"script",n=document.createElement(e);switch(e){case"script":n.src=t,document.querySelector("body").appendChild(n);break;case"link":n.rel="stylesheet",n.href=t,document.querySelector("head").appendChild(n)}return new Promise(function(t,e){n.addEventListener("load",function(){t()})})},downloadBaseResource:function(){var t=this;this.loadFunc("/editor/tinymce.min.js").then(function(e){Promise.all([t.loadFunc(s),t.loadFunc(r)]).then(function(e){t.loadResource()})})},loadResource:function(){var t=this,e=l.concat(c).map(function(e){var n=/css$/.test(e),i=n?"link":"script",o=n?e:"/editor/plugins/".concat(e,"/plugin.min.js");return t.loadFunc(o,i)});Promise.all(e).then(function(e){t.loading=!1,t.initEditor()})}},mounted:function(){window.tinymce?this.initEditor():(this.loading=!0,this.downloadBaseResource())}},u=(n("396e"),n("048f")),m=Object(u.a)(d,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],class:"mt30 "+(this.loading?"loading":"")},[e("div",{attrs:{id:"ueditor"+this._uid,name:"content",type:"text/plain"}})])},[],!1,null,"3a14598b",null);m.options.__file="Index.vue";var p=m.exports,f=n("2f67"),h={name:"editor",data:function(){return{editorContent:"",imageUrl:"",uploadBannerAPI:"".concat(f.k),title:"",poststyle:"",plateform:"",postTime:"",loading:!1}},props:{newsInfoId:{type:Number,required:!0},modelAddInfoShow:{type:Boolean,required:!0}},components:{TinyEditor:p},computed:{timeTypeDisabled:function(){return-1!==this.newsInfoId&&2===this.poststyle}},methods:{postCentent:function(){var t=this,e={imgUrl:this.imageUrl,title:this.title,platform:parseInt(this.plateform),status:parseInt(this.poststyle),content:this.editorContent,initContent:null,publishTime:2==this.poststyle?this.postTime:""};this.newsInfoId<0?Object(f.a)(Object(i.a)({},e)).then(function(e){var n=e.data,i="success";1e3===n.code?t.$message({type:i,message:"success"===i?"操作成功！":n.msg}).then(t.finishOption()):i="error",t.$message({type:i,message:"success"===i?"操作成功！":n.msg})}).catch(function(t){}):Object(f.h)(this.newsInfoId,Object(i.a)({},e)).then(function(e){var n=e.data,i="success";1e3===n.code?t.$message({type:i,message:"success"===i?"操作成功！":n.msg}).then(t.finishOption()):i="error",t.$message({type:i,message:"success"===i?"操作成功！":n.msg})}).catch(function(t){})},handleAvatarSuccess:function(t,e){this.imageUrl=t.data.url,console.log(this.imageUrl)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,n=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&n},getDetails:function(){var t=this;this.loading=!0,-1!=this.newsInfoId&&Object(f.f)(this.newsInfoId).then(function(e){if(1e3===e.data.code){var n=e.data.data;t.imageUrl=n.imgUrl,t.plateform=n.platform,t.poststyle=n.status,t.title=n.title,t.editorContent=n.content,t.postTime=n.publishTime}t.loading=!1}).catch(function(e){t.loading=!1})},finishOption:function(){this.$emit("finish-action"),this.$emit("close-form")},setEditorContent:function(t){this.editorContent=t}},mounted:function(){this.newsInfoId>0&&this.getDetails(this.newsInfoId)}},g=(n("a350"),Object(u.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"wangeditor",loading:t.loading}},[n("div",{staticClass:"uploadpic"},[n("el-upload",{staticClass:"avatar-uploader",attrs:{accept:".gif,.jpg,.jpeg,.png",action:t.uploadBannerAPI,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t.imageUrl?n("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):t._e()],1),n("div",[n("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),3!==t.poststyle?n("div",{staticClass:"flex"},[n("h3",[t._v("请选择发布方式: ")]),n("el-radio-group",{attrs:{disabled:t.timeTypeDisabled},model:{value:t.poststyle,callback:function(e){t.poststyle=e},expression:"poststyle"}},[n("el-radio",{attrs:{label:1}},[t._v("及时发送")]),n("el-radio",{attrs:{label:2}},[t._v("定时发送")]),n("el-radio",{attrs:{label:0}},[t._v("保存为草稿")])],1)],1):t._e(),2==t.poststyle?n("div",{staticClass:"flex"},[n("h3",[t._v("请选择定时发送时间: ")]),n("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",disabled:t.timeTypeDisabled},model:{value:t.postTime,callback:function(e){t.postTime=e},expression:"postTime"}})],1):t._e(),n("div",{staticClass:"flex"},[n("h3",[t._v("请选择发布平台: ")]),n("el-radio-group",{model:{value:t.plateform,callback:function(e){t.plateform=e},expression:"plateform"}},[n("el-radio-button",{attrs:{label:"1"}},[t._v("患者端")]),n("el-radio-button",{attrs:{label:"2"}},[t._v("医生端")])],1)],1)],1),n("tiny-editor",{model:{value:t.editorContent,callback:function(e){t.editorContent=e},expression:"editorContent"}}),n("el-button",{staticClass:"margin20",attrs:{type:"primary"},on:{click:t.postCentent}},[t._v("发送")])],1)},[],!1,null,null,null));g.options.__file="AddInformation.vue";e.default=g.exports},"761c":function(t,e,n){"use strict";n.d(e,"g",function(){return a}),n.d(e,"j",function(){return s}),n.d(e,"e",function(){return r}),n.d(e,"b",function(){return l}),n.d(e,"h",function(){return c}),n.d(e,"a",function(){return d}),n.d(e,"i",function(){return u}),n.d(e,"c",function(){return m}),n.d(e,"f",function(){return p}),n.d(e,"d",function(){return f});var i=n("5bf4"),o=n("4088"),a="".concat(o.a,"/upload"),s=function(t){return Object(i.a)({url:"/upload",method:"post",data:t})},r=function(){return Object(i.a)({url:"/getProvince",method:"get"})},l=function(t){return Object(i.a)({url:"/getCityList",method:"get",params:t})},c=function(t){return Object(i.a)({url:"/users/login",method:"post",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},d=function(){return Object(i.a)({url:"/account/authList",method:"get"})},u=function(t){return Object(i.a)({url:"/users/modifyPassword",method:"post",data:t})},m=function(t){return Object(i.a)({url:"/member/doctor/getHospitalList",method:"get",params:t})},p=function(t){return Object(i.a)({url:"/content/secondDepartment",method:"get",params:t})},f=function(){return Object(i.a)({url:"/member/doctor/getPositionalTitleList",method:"get"})}},a350:function(t,e,n){"use strict";var i=n("005d");n.n(i).a},b0432:function(t,e,n){}}]);