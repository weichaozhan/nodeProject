(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2c683c31"],{2165:function(t,e,n){},ea3e:function(t,e,n){"use strict";n.r(e);var a=n("efa4"),s=n("d0d1"),i={name:"TrendDetail",data:function(){return{trendDetail:{},wholeLoding:!1,imageArray:"",commentData:[],form:{page:1,limit:10},totalCount:0,secondCommentShow:!1,commentId:null}},components:{Comment:function(){return n.e("chunk-0a2e5448").then(n.bind(null,"c8ff"))}},props:{trendId:{required:!0},getTrendList:{required:!0,type:Function}},watch:{trendId:function(t){this.initPage(t)}},methods:{initPage:function(t){this.getTrendDetail(t),this.getTrendFirstComment(t)},getTrendDetail:function(t){var e=this;this.wholeLoding=!0,Object(s.d)(t).then(function(t){e.$set(e.$data,"trendDetail",t.data.data),e.wholeLoding=!1,t.data.data.imgArr.map(function(t){var n="<img class='datailImg' src="+t+" height='140' width='140' />";e.imageArray=e.imageArray+n})}).catch(function(t){})},getTrendFirstComment:function(t,e){var n=this;this.wholeLoding=!0,Object(s.e)(t,Object(a.a)({},this.form)).then(function(t){n.wholeLoding=!1,n.commentData=t.data.data.data,n.totalCount=t.data.data.totalCount})},handleSizeChange:function(t){this.form.limit=t,this.getTrendList()},handleCurrentChange:function(t){this.form.page=t,this.getTrendList()},finishOptions:function(){this.getTrendList(),this.$emit("close-model"),this.initPage(this.trendId)},handleSetTop:function(){var t=this;console.log(this.trendId),Object(s.h)({dynamicId:this.trendId}).then(function(e){var n=e.data,a="success";1e3===n.code||(a="error"),t.$message({type:a,message:"success"===a?"操作成功！":n.msg})})},handleDelete:function(){var t=this;Object(s.a)(this.trendId).then(function(e){var n=e.data,a="success";1e3===n.code?t.finishOptions():a="error",t.$message({type:a,message:"success"===a?"删除成功！":n.msg})})},handleDelComment:function(t){var e=this,n=t.id;Object(s.b)(n).then(function(t){var n=t.data;1e3===n.code?e.getTrendFirstComment(e.trendId):e.status="error",e.$message({type:"success",message:"操作成功！"})})},handleSecondCheck:function(t){this.commentId=t.id,this.secondCommentShow=!0},openDelectModel:function(){var t=this;this.$confirm("此操作将永久删除该动态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.handleDelete().then(function(e){1e3==e.data.code?t.$message({type:"success",message:"删除成功!"}):t.$message({type:"info",message:"已取消删除"})})})}},mounted:function(){this.initPage(this.trendId)}},o=(n("fa6c"),n("048f")),l=Object(o.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.wholeLoding,expression:"wholeLoding"}],staticClass:"wrapper--doctor-detail"},[n("section",{staticClass:"options"},[n("el-button",{attrs:{type:"primary"},on:{click:t.handleSetTop}},[t._v("置顶")]),n("el-button",{attrs:{type:"primary"},on:{click:t.openDelectModel}},[t._v("删除")])],1),n("section",{staticClass:"base-msg"},[n("div",{staticClass:"base-msg__doctor-person"},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:6}},[t._v("\n                    动态ID："+t._s(t.trendDetail.id)+"\n                ")]),n("el-col",{attrs:{span:6}},[t._v("\n                    时间："+t._s(t.trendDetail.releaseTime)+"\n                ")]),n("el-col",{attrs:{span:12}},[t._v("\n                    是否匿名："+t._s(1==t.trendDetail.isAnonymous?"是":"否")+"\n                ")])],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:6}},[t._v("\n                    用户名："+t._s(t.trendDetail.username)+"\n                ")]),n("el-col",{attrs:{span:6}},[t._v("\n                    姓名："+t._s(t.trendDetail.realName)+"\n                ")]),n("el-col",{attrs:{span:12}},[t._v("\n                    手机："+t._s(t.trendDetail.phone)+"\n                ")])],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[t._v("\n                    小组："+t._s(t.trendDetail.groupName||"-")+"\n                ")])],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[t._v("\n                    动态内容："+t._s(t.trendDetail.content||"-")+"\n                ")])],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[t._v("\n                    图片：\n                    "),n("div",{domProps:{innerHTML:t._s(t.imageArray)}})])],1)],1)]),n("el-row",{staticClass:"detail-section"},[n("el-col",{staticClass:"detail-section__title",attrs:{span:2}},[t._v("\n            动态数据\n        ")]),n("el-col",{attrs:{span:22}},[n("table",{staticClass:"data-table-show"},[n("tr",[n("th",[t._v("点赞量")]),n("th",[t._v("评论量")]),n("th",[t._v("收藏量")]),n("th",[t._v("浏览量")])]),n("tr",[n("td",[t._v(t._s(t.trendDetail.focusNum))]),n("td",[t._v(t._s(t.trendDetail.commentNum))]),n("td",[t._v(t._s(t.trendDetail.collectNum))]),n("td",[t._v(t._s(t.trendDetail.viewNum))])])])])],1),n("el-row",{staticClass:"detail-section"},[n("el-col",{staticClass:"detail-section__title",attrs:{span:2}},[t._v("\n            评论数据\n        ")]),n("el-col",{attrs:{span:22}},[n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.commentData,size:"medium ",border:"",height:"350px"}},[n("el-table-column",{attrs:{prop:"username",label:"用户名","min-width":"100"}}),n("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"100"}}),n("el-table-column",{attrs:{prop:"createTime",label:"时间","min-width":"100"}}),n("el-table-column",{attrs:{prop:"id",label:"评论ID","min-width":"50"}}),n("el-table-column",{attrs:{prop:"comment",label:"评论","min-width":"100"}}),n("el-table-column",{attrs:{prop:"focusNum",label:"点赞量","min-width":"50"}}),n("el-table-column",{attrs:{label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleSecondCheck(e.row)}}},[t._v("查看")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleDelComment(e.row)}}},[t._v("删除")])]}}])})],1),n("div",{staticClass:"table-footer--APP",attrs:{slot:"append"},slot:"append"},[n("el-pagination",{attrs:{"current-page":t.form.page,"page-sizes":[10,20,30,40,50,60,70,80,90],"page-size":t.form.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])],1),n("el-dialog",{attrs:{title:"动态详细","custom-class":"el-dialog--user-manage__doctor-detail","append-to-body":!0,visible:t.secondCommentShow,width:"70%"},on:{"update:visible":function(e){t.secondCommentShow=e}}},[n("comment",{attrs:{"comment-id":t.commentId,"get-trend-detail":t.getTrendDetail},on:{"close-model":function(e){t.secondCommentShow=!1}}})],1)],1)},[],!1,null,"00650fe7",null);l.options.__file="TrendDetail.vue";e.default=l.exports},fa6c:function(t,e,n){"use strict";var a=n("2165");n.n(a).a}}]);