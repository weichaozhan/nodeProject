(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7ef2a2c6"],{"65ea":function(e,t,a){"use strict";a.r(t);a("84fb");var s=a("4c5b"),i={data:function(){return{imageUrl:"",addFirstDepAPI:"".concat(s.a),departmentImage:"",imgFile:"",firstDepName:"",imageShowUrl:""}},props:{depId:{type:Number,required:!0}},methods:{beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},uploadImg:function(e,t){this.imgFile=e.raw,this.imageShowUrl=URL.createObjectURL(e.raw)},submitFirstDep:function(){var e=this;if(console.log(this.depId),0==this.depId){console.log(this.depId);var t=new FormData;0!==this.imgFile&&t.append("departmentImage",this.imgFile),t.append("departmentName",this.firstDepName),Object(s.a)(t).then(function(t){var a=t.data,s="success";1e3===a.code?e.$message({type:s,message:"success"===s?"添加成功！":a.msg}).then(e.finishOption()):s="error",e.$message({type:s,message:"success"===s?"操作成功！":a.msg})}).catch(function(e){})}else{t=new FormData;""!==this.imgFile&&t.append("departmentImage",this.imgFile),t.append("departmentName",this.firstDepName),console.log(t.get("departmentImage")),Object(s.c)(this.depId,t).then(function(t){var a=t.data;console.log(a);var s="success";1e3===a.code?e.$message({type:s,message:"success"===s?"修改成功！":a.msg}).then(e.finishOption()):s="error",e.$message({type:e.status,message:"success"===e.status?"操作成功！":a.msg})}).catch(function(e){})}},getDetails:function(e){var t=this;Object(s.i)(e).then(function(e){t.imageUrl=e.data.data.departmentImage,t.imageShowUrl=e.data.data.departmentImage,t.firstDepName=e.data.data.departmentName}).catch(function(e){})},finishOption:function(){this.$emit("finish-action"),this.$emit("close-form")}},mounted:function(){this.depId>0&&this.getDetails(this.depId)}},n=(a("e7e1"),a("048f")),r=Object(n.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h5",[e._v("请输入一级科室名称")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firstDepName,callback:function(t){e.firstDepName=t},expression:"firstDepName"}}),a("div",[a("h5",[e._v("科室图片")]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"auto-upload":!1,"on-change":e.uploadImg,"before-upload":e.beforeAvatarUpload}},[e.imageShowUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageShowUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e.depId>0?a("el-button",{attrs:{type:"primary"},on:{click:e.submitFirstDep}},[e._v("\n        修改\n    ")]):a("el-button",{attrs:{type:"primary"},on:{click:e.submitFirstDep}},[e._v("\n        添加\n    ")])],1)},[],!1,null,null,null);r.options.__file="AddDepModal.vue";t.default=r.exports},"9b7d":function(e,t,a){},e7e1:function(e,t,a){"use strict";var s=a("9b7d");a.n(s).a}}]);